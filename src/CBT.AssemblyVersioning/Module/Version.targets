<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" >

  <PropertyGroup>
    <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
  </PropertyGroup>

  <PropertyGroup>
    <!-- Please use international format yyyy-mm-dd -->
    <VersionBuildNumberStartDate Condition="'$(VersionBuildNumberStartDate)' == ''">$([System.DateTime]::Now.ToString())</VersionBuildNumberStartDate>

    <!--
    Note: when changing VersionMajor or VersionMinor, you probably want to also reset the VersionBuildNumberStartDate:
    - If you want to reset the build number to zero: set VersionBuildNumberStartDate to current date
    - If you want to reset the build number to say 1000: set VersionBuildNumberStartDate to 1000 days in the past.
      Here's how one would figure out what date it was 1000 days ago in PowerShell: Write-Host (Get-Date).AddDays(-1000)
    -->
    <VersionMajor Condition="'$(VersionMajor)' == ''">1</VersionMajor>
    <VersionMinor Condition="'$(VersionMinor)' == ''">0</VersionMinor>
    <VersionBuildNumber Condition="'$(VersionBuildNumber)'==''">$([System.DateTime]::Parse($([System.DateTime]::Now.ToString())).Subtract($([System.DateTime]::Parse($(VersionBuildNumberStartDate)))).Days)</VersionBuildNumber>
    <VersionBuildRevision Condition="'$(VersionBuildRevision)'==''">0</VersionBuildRevision>
    <VersionFull>$(VersionMajor).$(VersionMinor).$(VersionBuildNumber).$(VersionBuildRevision)</VersionFull>
    <VersionInformationalVersion Condition="'$(VersionInformationalVersion)' == ''">$(VersionFull)$(VersionBuildLabel)</VersionInformationalVersion>
    <VersionAssemblyVersion Condition="'$(VersionAssemblyVersion)' == ''">$(VersionMajor).$(VersionMinor).0.0</VersionAssemblyVersion>
    <VersionAssemblyFileVersion Condition="'$(VersionAssemblyFilVersion)' == ''">$(VersionFull)</VersionAssemblyFileVersion>
  </PropertyGroup>

  <PropertyGroup>
    <AssemblyInfoInternalName Condition="'$(AssemblyInfoInternalName)'==''">$(AssemblyName)</AssemblyInfoInternalName>
    <AssemblyInfoOriginalFileName  Condition="'$(AssemblyInfoOriginalFileName)'==''">$(AssemblyName)</AssemblyInfoOriginalFileName>
  </PropertyGroup>

  <ItemGroup>
    <AssemblyInfoVars Include="%25AssemblyInfoFileDescription%25"><Value>$(AssemblyInfoFileDescription)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyInfoInternalName%25"><Value>$(AssemblyInfoInternalName)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyInfoOriginalFileName%25"><Value>$(AssemblyInfoOriginalFileName)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyVersion%25"><Value>$(VersionAssemblyVersion)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyFileVersion%25"><Value>$(VersionAssemblyFileVersion)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyInformationalVersion%25"><Value>$(VersionInformationalVersion)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyVersionMajor%25"><Value>$(VersionMajor)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyVersionMinor%25"><Value>$(VersionMinor)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyVersionBuildNumber%25"><Value>$(VersionBuildNumber)</Value></AssemblyInfoVars>
    <AssemblyInfoVars Include="%25AssemblyVersionBuildRevision%25"><Value>$(VersionBuildRevision)</Value></AssemblyInfoVars>
  </ItemGroup>

</Project>
